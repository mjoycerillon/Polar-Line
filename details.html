<!DOCTYPE html>
<!-- This webpage is created by:
     Komal Nayan Galla   C0779428            -->
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Polar Line">
    <title>Polar Line | Product Details</title>
    <link rel="stylesheet" href="./css/polarline.css">
    <link rel="stylesheet" href="./css/polarline-details.css">
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@1,400;1,700&family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/sweetalert/2.1.0/sweetalert.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.js"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="./scripts/polarline.js"></script>


</head>
<body>
    <div id="polarline-head" class="d-flex justify-content-center">
        <a href="index.html" class="d-flex align-items-center">
            <span class="logo-polar">polar</span>
            <span class="logo-line">line.</span>
        </a>
    </div>
    <nav>
        <div class="filler"></div>
        <div class="nav-links-grp">
            <ul class="nav-links">
                <li><a href="index.html">HOME</a></li>
                <li id="navShop">
                    <a href="shop.html">SHOP</a>
                    <div class="drop-menu">
                        <div class="sub-menu">
                            <a href="shop.html">Women</a>
                            <ul class="inner-drop-menu">
                                <li><a href="shop.html">Tops</a></li>
                                <li><a href="shop.html">Bottoms</a></li>
                                <li><a href="shop.html">Hats</a></li>
                                <li><a href="shop.html">Socks</a></li>
                            </ul>  
                        </div>
                        <div class="sub-menu">
                            <a href="shop.html">Men</a>
                            <ul class="inner-drop-menu">
                                <li><a href="shop.html">Tops</a></li>
                                <li><a href="shop.html">Bottoms</a></li>
                                <li><a href="shop.html">Hats</a></li>
                                <li><a href="shop.html">Socks</a></li>
                            </ul>  
                        </div>
                        <div class="sub-menu">
                            <a href="shop.html">Kids</a>
                            <ul class="inner-drop-menu">
                                <li><a href="shop.html">Tops</a></li>
                                <li><a href="shop.html">Bottoms</a></li>
                                <li><a href="shop.html">Hats</a></li>
                                <li><a href="shop.html">Socks</a></li>
                            </ul>  
                        </div>
                        <div class="sub-menu">
                            <a href="shop.html">Sale</a>
                            <ul class="inner-drop-menu">
                                <li><a href="shop.html">New Sale Items</a></li>
                                <li><a href="shop.html">2 for $20</a></li>
                                <li><a href="shop.html">Clearance</a></li>
                            </ul>  
                        </div>
                    </div>
                </li>
                <li><a href="contactus.html">CONTACT US</a></li>
            </ul>
        </div>
        <div id="nav-icons">
            <ul class="nav-icons-grp">
                <li><a href="#"><img src="./images/home/search.png" alt="Search" height="35"></a></li>
                <li id="navShopBag"><a href="cart.html"><img src="./images/home/shop-bag.png" alt="Shop Bag" height="35"></a></li>
                <li id="navAccount" class="dropdown">
                    <a class="navAccountLink" href="login.html"><img src="./images/home/account.png" alt="Account" height="35"></a>
                    <ul class="dropdown-menu nav-account-d-menu">
                        <li><a class="dropdown-item navAccountLink" href="login.html">
                            <b><span id="navAccountName">Sign in/Register</span></b></a>
                        </li>
                        <li><a class="dropdown-item" href="#">My Orders</a></li>
                        <li><a class="dropdown-item" href="#">My Coupons</a></li>
                        <li><a class="dropdown-item" href="#">My Points</a></li>
                    </ul>    
                </li>
            </ul>
        </div>
    </nav>
    <main>
        <div class="product-gallery">
            <div class="product-gallery-column1">
                <div id="imgDetailsGalleryCol1Image1"><img src="./images/details/details-img2.png" height="150"/></div>
                <div id="imgDetailsGalleryCol1Image2"><img src="./images/details/details-img1.png" height="150"/></div>
                <div id="imgDetailsGalleryCol1Image3"><img src="./images/details/details-img4.png" height="150"/></div>
            </div>
            <div class="product-gallery-column2">
            <img src="./images/details/details-img3.png" height="470"/>
            </div>
        </div>
        <div class="product-desc">
            <span id="productName">Amelie Winter Puffer Jacket </span><button class="like-button"></button><br>
            <span id="productCost">$43.99</span> <br>
            <span id="productReview">
                <span class="fa fa-star checked"></span>
                <span class="fa fa-star checked"></span>
                <span class="fa fa-star checked"></span>
                <span class="fa fa-star checked"></span>
                <span class="fa fa-star"></span> 
                4.9 | Reviews  
            </span><br><br>
            <span id="productColor">COLOR  <br><button class="colorSelBlack" ></button></span><br><br>
            <span id="productSize">SIZE  &nbsp;&nbsp;&nbsp;&nbsp;<a href="#">Size Guide >></a><br>
                <div class="sizeSel">S</div>&nbsp;&nbsp;<div class="sizeSel">M</div>&nbsp;&nbsp;<div class="sizeSel">L</div>&nbsp;&nbsp;<div class="sizeSel">XL</div>
            </span><br>
            <span id="productAvailability">Availability : In Stock</span> <br><br>
            <button id="btnDetailsAddToBag">ADD TO BAG</button>
            <br>
            <p>
                <b>Product Description</b>
                <p class="product-description">
                    Material : Polyester <br>
                    Weight : 0.3100kg <br>
                    Brand : Loren Ipsum <br>
                    Long cuffed sleeve <br>
                    2 side pockets <br>
                    Front Zip Fastening
                </p>
            </p>
        </div>
    </main>
    <footer class="d-flex">
        <div class="container">
            <div class="row p-5">
              <div class="col-4">
                <div id="footer-logo">
                    <span class="logo-polar">polar</span><span class="logo-line">line.</span>
                </div>
                <div id="footer-about-us">
                    Beyond helping you look your best, PolarLine strives to get you the perfect clothing you've been looking for 
                    from local and international brands. We at PolarLine want to give you the perfect wardrobe you've been looking 
                    for. Be fashionable even in winter.
                </div>
                <div id="footer-find-us">FIND US ON</div>
                <div id="footer-social-media">
                    <img src="images/home/facebook.png" alt="Facebook Icon" height="35">
                    <img src="images/home/pinterest.png" alt="Pinterest Icon" height="35">
                    <img src="images/home/instagram.png" alt="Instagram Icon" height="35">
                </div>              </div>
              <div class="col footer-col-2">
                <div class="footer-col-header">EXPLORE</div>
                <div>About us</div>
                <div>FAQS</div>
                <div>Privacy Policy</div>
                <div>Returns Policy</div>
              </div>
              <div class="col-4 p-2">
                <div class="footer-col-header">NEW TO POLARLINE?</div>
                <div id="footer-voucher"><b>Get a $50 VOUCHER</b> (plus the latest fashion news and products launches) just by subscribing to our newsletter.</div>
                <form class="footer-form">
                    <input type="email" placeholder="Email Address"><br>
                    <button type="submit">SUBSCRIBE</button>
                </form>
                </div>
            </div>
          </div>
    </footer>
    <script>
        $(window).on('load', function () {
            var fromShopPage = localStorage.getItem("fromShopPage");
            if(fromShopPage=="true")
            {
                $('#imgDetailsGalleryCol1Image1').children('img').attr('src','https://source.unsplash.com/1000x1500/?winter,clothes');
                $('#imgDetailsGalleryCol1Image2').children('img').attr('src','https://source.unsplash.com/1000x1500/?wool,jacket');
                $('#imgDetailsGalleryCol1Image3').children('img').attr('src','https://source.unsplash.com/1000x1500/?sweater');
                var prodName = localStorage.getItem("prod_title");
                console.log('Name : '+prodName);
                var imgLoc = localStorage.getItem("img_loc");
                var prodCost = localStorage.getItem("prod_cost");
                var prodColor = localStorage.getItem("prod_color");
                console.log('Cost : '+prodCost);
                console.log('Color : '+prodColor);
                $('.colorSelBlack').css('background-color',prodColor);
                $('#productName').text(prodName);
                $('#productCost').text("$"+prodCost);
                $('.product-gallery-column2').children('img').attr('src',imgLoc);
            }
        });
        document.querySelector('.like-button').addEventListener('click', (e) => {
        e.currentTarget.classList.toggle('liked');
        });

        $('#imgDetailsGalleryCol1Image2').click(function(){
            $(this).children('img').fadeOut(0);
            $('.product-gallery-column2').children('img').fadeOut(0);
            var x = $(this).children('img').attr('src');
            var y = $('.product-gallery-column2').children('img').attr('src');
            $(this).children('img').attr('src',y);
            $('.product-gallery-column2').children('img').attr('src',x);
            $('.product-gallery-column2').children('img').fadeIn(1500);
            $(this).children('img').fadeIn(1500);
            
            
        });

        $('#imgDetailsGalleryCol1Image1').click(function(){
            $(this).children('img').fadeOut(0);
            $('.product-gallery-column2').children('img').fadeOut(0);
            var x = $(this).children('img').attr('src');
            var y = $('.product-gallery-column2').children('img').attr('src');
            $(this).children('img').attr('src',y);
            $('.product-gallery-column2').children('img').attr('src',x);
            $('.product-gallery-column2').children('img').fadeIn(1500);
            $(this).children('img').fadeIn(1500);
        });

        $('#imgDetailsGalleryCol1Image3').click(function(){
            $(this).children('img').fadeOut(0);
            $('.product-gallery-column2').children('img').fadeOut(0);
            var x = $(this).children('img').attr('src');
            var y = $('.product-gallery-column2').children('img').attr('src');
            $(this).children('img').attr('src',y);
            $('.product-gallery-column2').children('img').attr('src',x);
            $('.product-gallery-column2').children('img').fadeIn(1500);
            $(this).children('img').fadeIn(1500);
        });

        $('.sizeSel').click(function(){
            $(this).css('color','black');
            $(this).css('border','2px solid black');
            $(this).siblings().css('color','gray');
            $(this).siblings().css('border','1px solid gray');
        });

        $('#btnDetailsAddToBag').click(function(){

            var isLoggedOn = localStorage.getItem("isLoggedOn");
            //console.log(isLoggedOn);
            var accounts = localStorage.getItem("accounts");
            
            var accountsObj = JSON.parse(accounts);
            var prodName = localStorage.getItem("prod_title");
            //console.log(localStorage.getItem("current_user"));
            console.log('button clicked');
            swal("Success!", prodName+ " is added to bag.", "success");
            //console.log(accountsObj[0]["cart"]);
            if(isLoggedOn == "true")
            {
            var currentUser = JSON.parse(localStorage.getItem("current_user"));
            currentUser["cart"].push(
                {
                    "imageLocation" : $('.product-gallery-column2').children().attr('src'),
                    "price" : $('#productCost').text().substr(1,$('#productCost').text().length),
                    "product" : $('#productName').text(),
                    "quantity" : "1"
                }
            );
            accountsObj[0]["cart"].push(
                {
                    "imageLocation" : $('.product-gallery-column2').children().attr('src'),
                    "price" : $('#productCost').text().substr(1,$('#productCost').text().length),
                    "product" : $('#productName').text(),
                    "quantity" : "1"
                }
            );
            //console.log(accountsObj[0]);
            accounts = JSON.stringify(accountsObj);
            var currUser = JSON.stringify(currentUser);
            localStorage.setItem("current_user",currUser);
            localStorage.setItem("accounts",accounts);
            }
            else{
                guest = localStorage.getItem("guest_user");
                guest = JSON.parse(guest);
               // guest=[
                //{
                 //   "imageLocation" : $('.product-gallery-column2').children().attr('src'),
                 //   "price" : $('#productCost').text().substr(1,$('#productCost').text().length),
                 //   "product" : $('#productName').text(),
                 //   "quantity" : "1"
                //}]
                guest.push(
                    {
                    "imageLocation" : $('.product-gallery-column2').children().attr('src'),
                    "price" : $('#productCost').text().substr(1,$('#productCost').text().length),
                    "product" : $('#productName').text(),
                    "quantity" : "1"
                    }
                );
                var guestUser = JSON.stringify(guest);
                localStorage.setItem("guest_user",guestUser);
                console.log(localStorage.getItem("guest_user"));
            }
        });
    </script>
</body>
</html>
